<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <title>TechTitans - Đăng Nhập</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
</head>
<body>
    <div class="wrapper">
        <!-- Header Start -->
        <div class="header">
            <div class="container-fluid">
                <div class="header-top row align-items-center">
                    <div class="col-lg-3">
                        <div class="brand">
                            <a href="index.html" class="d-flex">
                                <img src="img/2-removebg-preview.png" alt="Logo">
                                TechTitans
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-9">
                        <div class="navbar navbar-expand-lg bg-light navbar-light">
                            <a href="#" class="navbar-brand">MENU</a>
                            <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
                                <span class="navbar-toggler-icon"></span>
                            </button>
                            <div class="collapse navbar-collapse justify-content-between" id="navbarCollapse">
                                <div class="navbar-nav mx-auto">
                                    <a href="index.html" class="nav-item nav-link">Trang chủ</a>
                                    <a href="about.html" class="nav-item nav-link">Giới thiệu</a>
                                    <a href="service.html" class="nav-item nav-link">Dịch vụ</a>
                                    <a href="complaint.html" class="nav-item nav-link">Khiếu nại</a>
                                    <a href="contact.html" class="nav-item nav-link">Liên hệ</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Header End -->

        <!-- Login Form Start -->
        <div class="contact d-flex justify-content-center align-items-center" style="margin-top: 40px; background: url('./img/banner 4.jpg') no-repeat center center/cover; height: 700px;">
            <div class="container text-center">
                <div class="row d-flex justify-content-center">
                    <div class="col-md-5 p-4" style="border-radius: 10px; background-color: rgba(255, 255, 255, 0.8);">
                        <h3 class="mb-4">Đăng Nhập</h3>
                        <div class="contact-form">
                            <form id="loginForm">
                                <div class="form-group">
                                    <input type="text" id="username" class="form-control" placeholder="Tên đăng nhập" required="required" />
                                </div>
                                <div class="form-group">
                                    <input type="password" id="password" class="form-control" placeholder="Mật khẩu" required="required" />
                                </div>
                                <button type="button" class="btn btn-primary" onclick="login()">Đăng Nhập</button>
                            </form>
                            <p class="mt-3">
                                Bạn chưa có tài khoản? 
                                <a href="register.html" class="text-primary">Nhấp vào đây để Đăng Ký</a>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Login Form End -->


        <!-- JavaScript Libraries -->
        <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>

        <!-- Login Script -->
        <script>
            // Dữ liệu người dùng giả lập
            const users = {
                "admin": { username: "admin", password: "admin123", role: "admin" },
                "employee": { username: "employee", password: "nv123", role: "employee" },
                "user": { username: "user", password: "user123", role: "user" }
            };

            // Kiểm tra trạng thái đăng nhập khi tải trang (chỉ khi không phải trang login.html)
            document.addEventListener("DOMContentLoaded", () => {
                const isLoggedIn = localStorage.getItem("isLoggedIn");
                const role = localStorage.getItem("role");

                if (isLoggedIn === "true" && window.location.pathname !== "/login.html") {
                    redirectToRolePage(role);
                }
            });

            // Hàm đăng nhập
            function login() {
                const username = document.getElementById("username").value;
                const password = document.getElementById("password").value;

                // Kiểm tra thông tin đăng nhập
                if (users[username] && users[username].password === password) {
                    const role = users[username].role;
                    localStorage.setItem("isLoggedIn", "true");
                    localStorage.setItem("role", role);

                    // Chuyển hướng sau khi đăng nhập dựa trên vai trò
                    redirectToRolePage(role);
                } else {
                    alert("Tên đăng nhập hoặc mật khẩu không đúng!");
                }
            }

            // Hàm chuyển hướng dựa trên vai trò
            function redirectToRolePage(role) {
                switch (role) {
                    case "admin":
                        window.location.href = "admin.html";
                        break;
                    case "employee":
                        window.location.href = "employee.html";
                        break;
                    case "user":
                        window.location.href = "index.html";
                        break;
                }
            }
        </script>
    </div>
</body>
</html>
